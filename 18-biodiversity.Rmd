---
title: "18 - Biodiversity analysis"
author: "Francisco E. Fonturbel"
date: "21/February/2023"
output: 
  html_document:
    includes:
        after_body: footer.html
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
	echo = TRUE,
	message = FALSE,
	warning = FALSE
)
```

## Using R to conduct biodiversity analysis

Today we will learn how to analyze and make sense of our biodiversity data (after long campaigns in the field collecting data... really exhausting). The `BiodiversityR` package contains many useful functions to run biodiversity analysis (the first time that you load this package may be asked to install XQuartz).


```{r data, message=FALSE, warning=FALSE}
#Loading required packages
library(dplyr)
library(ggplot2)
library(ggsci)
library(ggpubr)
library(vegan)
library(BiodiversityR)
library(Rarefy)

#Loading work data
data = read.csv("data/18_canola.csv",
                   header=TRUE,
                   sep=",")

attach(data)

animal.dt<-data[,5:26]
env.dt<-data[,3:4]

env.dt$posicion<-as.factor(env.dt$posicion)
env.dt$color<-as.factor(env.dt$color)
```

```{r grooming, include=FALSE, warning=FALSE, message=FALSE}
#Enabling multiplot capabilities
source("multiplot.R")

##Some ggplot2 grooming
My_Theme2 = theme(
  axis.title.x = element_text(size = 20,face="bold"),
  axis.text.x = element_text(size = 16),
  axis.text.y = element_text(size = 16),
  axis.title.y = element_text(size = 20,face="bold"),
  legend.text = element_text(size = 14),
  legend.title = element_text(size = 14,face="bold"),
  panel.grid.major = element_blank(),
  panel.grid.minor = element_blank(),
  panel.background = element_rect(fill = "white"),
  plot.title = element_text(size = 20,face="bold"))
```

Today we will use some data of [Jaques et al. 2023](https://www.mdpi.com/2073-4395/13/2/552) as a working example. This dataset contains data of insect pollinator in a canola crop (the one with the yellow flowers), comparing pan trap color and position effects in the diversity of insects captured.

## Rarefaction curves

a

## Final thoughts

a


## Session

```{r session, echo=TRUE}
sessionInfo()
```